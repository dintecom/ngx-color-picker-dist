import { Component, Input, Output, EventEmitter, ChangeDetectionStrategy } from '@angular/core';
import { ColorPickerControl } from './../../helpers/control.class';
import { getValueByType } from './../../helpers/helper.functions';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "../parts/color-presets/color-presets.component";
export class SwatchesPickerComponent {
    constructor(cdr) {
        this.cdr = cdr;
        this.colorChange = new EventEmitter(false);
        this.control = new ColorPickerControl();
        this.childControl = new ColorPickerControl();
        this.subscriptions = [];
        this.mapColors = {
            '#E6315B': [
                '#fc8da7', '#fa7d9a', '#f56484', '#f04a71', '#e82c58', '#e31746', '#de0235',
                '#d60234', '#d10232', '#c70230', '#b8022c', '#ab0229', '#9c0225', '#8f0122',
                '#8c0122', '#82011f', '#78011b', '#690117', '#5c0012', '#4f0010', '#42000c'
            ],
            '#793183': [
                '#ef8dfc', '#eb7dfa', '#e664f5', '#dc4af0', '#d22ce8', '#cb17e3', '#c402de',
                '#c002d9', '#bb02d4', '#b002c7', '#a202b8', '#9702ab', '#8a029c', '#7e018f',
                '#7a018a', '#730182', '#6c0178', '#5e0169', '#54015c', '#49014f', '#3d0142'
            ],
            '#009DE7': [
                '#8dd9fc', '#7dd2fa', '#64c7f5', '#4abbf0', '#2cade8', '#17a2e3', '#0298de',
                '#0295d9', '#0291d4', '#0289c7', '#027eb8', '#0275ab', '#026b9c', '#01628f',
                '#015f8a', '#015982', '#015278', '#014869', '#013f5c', '#01364f', '#012e42'
            ],
            '#00B59C': [
                '#8dfeea', '#7dfbe4', '#63f4db', '#4befd2', '#2de7c6', '#16e2be', '#03deb7',
                '#01ddb6', '#01d4ae', '#01c7a4', '#01b897', '#01aa8b', '#019b80', '#019076',
                '#018c73', '#01836c', '#017763', '#016857', '#005c4e', '#005044', '#004239'
            ],
            '#FFCE00': [
                '#fce68d', '#fae17d', '#f5da64', '#f0cf4a', '#e8c22c', '#e5bc17', '#deb202',
                '#deb100', '#d4aa02', '#c7a002', '#b89302', '#ab8902', '#9c7d02', '#8f7301',
                '#8c7001', '#826801', '#786201', '#695601', '#5c4b00', '#4f4100', '#423700'
            ],
            '#FF4A21': [
                '#fca28d', '#fa947d', '#f57f64', '#f0694a', '#e84f2c', '#e33c17', '#de2a02',
                '#d92a02', '#d42902', '#c72602', '#b82302', '#ab2102', '#9c1e02', '#8f1b01',
                '#8a1a01', '#821901', '#781701', '#691300', '#5c1100', '#4f0e00', '#420c00'
            ],
            '#D6D5D6': [
                '#fff', '#f2f2f2', '#e5e5e5', '#d9d9d9', '#cccccc', '#bfbfbf', '#b3b3b3',
                '#a6a6a6', '#999999', '#8c8c8c', '#808080', '#737373', '#666666', '#595959',
                '#4d4d4d', '#424242', '#363636', '#262626', '#1a1a1a', '#0f0f0f', '#000'
            ]
        };
    }
    ngOnInit() {
        if (this.color) {
            this.childControl.setValueFrom(this.color);
        }
        else {
            this.control.setValueFrom('#E6315B');
        }
        /**
         * set color presets
         * defined by swatches color picker component
         */
        this.control.setColorPresets([
            '#e6315b', '#793183', '#009de7', '#00b59c', '#ffce00', '#ff4a21', '#d6d5d6'
        ]);
        /**
         * initially open first group
         */
        this.childControl.setColorPresets(this.mapColors['#E6315B']);
        this.subscriptions.push(this.childControl.valueChanges.subscribe((value) => {
            this.colorChange.emit(getValueByType(value, this.childControl.initType));
        }));
        this.subscriptions.push(this.control.valueChanges.subscribe((value) => {
            this.cdr.markForCheck();
            const presets = this.mapColors[value.toHexString()];
            if (presets) {
                this.childControl.setColorPresets(presets);
            }
            this.colorChange.emit(getValueByType(this.childControl.value, this.childControl.initType));
        }));
    }
    ngOnDestroy() {
        this.cdr.detach();
        this.subscriptions.forEach((subscription) => subscription.unsubscribe());
        this.subscriptions.length = 0;
    }
    ngOnChanges(changes) {
        if (this.color && this.control && getValueByType(this.control.value, this.control.initType) !== this.color) {
            this.childControl.setValueFrom(this.color);
        }
    }
}
SwatchesPickerComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.0.1", ngImport: i0, type: SwatchesPickerComponent, deps: [{ token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });
SwatchesPickerComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.0.1", type: SwatchesPickerComponent, selector: "swatches-picker", inputs: { color: "color" }, outputs: { colorChange: "colorChange" }, usesOnChanges: true, ngImport: i0, template: "<color-presets-component \n    [columns]=\"7\"\n    direction=\"down\"\n    [(color)]=\"control.value\" \n    [colorPresets]=\"control.presets\"></color-presets-component>\n<color-presets-component\n    class=\"child-list\"\n    *ngIf=\"childControl.presets.length\"\n    [columns]=\"7\"\n    direction=\"down\"\n    [(color)]=\"childControl.value\" \n    [colorPresets]=\"childControl.presets\"></color-presets-component>", styles: [":host,:host ::ng-deep *{padding:0;margin:0;box-sizing:border-box}\n", "@charset \"UTF-8\";:host{display:block;background:#fff;width:224px;border:1px solid rgba(0,0,0,.2);box-shadow:#0000004d 0 0 2px;border-radius:4px;padding:6px}:host ::ng-deep color-preset,:host ::ng-deep color-preset-sublist{width:30px;height:30px}:host ::ng-deep color-preset:hover:after,:host ::ng-deep color-preset.selected:after{display:block;content:\"\\a0\";position:absolute;left:3px;top:3px;bottom:3px;right:3px;z-index:10;border:3px solid #fff;box-shadow:#0003 0 0 5px 2px}:host ::ng-deep .row:first-child color-preset:first-child,:host ::ng-deep .row:first-child color-preset-sublist:first-child{border-radius:4px 0 0 4px}:host ::ng-deep .row.last color-preset.last,:host ::ng-deep .row.last color-preset-sublist.last{border-radius:0 4px 4px 0}:host ::ng-deep .child-list .row.first color-preset.first,:host ::ng-deep .child-list .row.first color-preset-sublist.first{border-radius:4px 0 0}:host ::ng-deep .child-list .row.first color-preset.last,:host ::ng-deep .child-list .row.first color-preset-sublist.last{border-radius:0 4px 0 0}:host ::ng-deep .child-list .row.last color-preset.first,:host ::ng-deep .child-list .row.last color-preset-sublist.first{border-radius:0 0 0 4px}:host ::ng-deep .child-list .row.last color-preset.last,:host ::ng-deep .child-list .row.last color-preset-sublist.last{border-radius:0 0 4px}:host ::ng-deep .child-list{margin-top:6px;border-top:1px solid #e5e5e5;padding:6px 0 0}:host ::ng-deep .child-list color-preset:hover:after,:host ::ng-deep .child-list color-preset.selected:after{content:\"\\2714\";font-size:18px;color:#fff;border:0;left:0;top:0;bottom:0;right:0;line-height:30px;box-shadow:none;text-align:center}\n"], dependencies: [{ kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i2.ColorPresetsComponent, selector: "color-presets-component", inputs: ["columns", "colorPresets", "hue", "color", "direction"], outputs: ["hueChange", "colorChange"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.0.1", ngImport: i0, type: SwatchesPickerComponent, decorators: [{
            type: Component,
            args: [{ selector: `swatches-picker`, changeDetection: ChangeDetectionStrategy.OnPush, template: "<color-presets-component \n    [columns]=\"7\"\n    direction=\"down\"\n    [(color)]=\"control.value\" \n    [colorPresets]=\"control.presets\"></color-presets-component>\n<color-presets-component\n    class=\"child-list\"\n    *ngIf=\"childControl.presets.length\"\n    [columns]=\"7\"\n    direction=\"down\"\n    [(color)]=\"childControl.value\" \n    [colorPresets]=\"childControl.presets\"></color-presets-component>", styles: [":host,:host ::ng-deep *{padding:0;margin:0;box-sizing:border-box}\n", "@charset \"UTF-8\";:host{display:block;background:#fff;width:224px;border:1px solid rgba(0,0,0,.2);box-shadow:#0000004d 0 0 2px;border-radius:4px;padding:6px}:host ::ng-deep color-preset,:host ::ng-deep color-preset-sublist{width:30px;height:30px}:host ::ng-deep color-preset:hover:after,:host ::ng-deep color-preset.selected:after{display:block;content:\"\\a0\";position:absolute;left:3px;top:3px;bottom:3px;right:3px;z-index:10;border:3px solid #fff;box-shadow:#0003 0 0 5px 2px}:host ::ng-deep .row:first-child color-preset:first-child,:host ::ng-deep .row:first-child color-preset-sublist:first-child{border-radius:4px 0 0 4px}:host ::ng-deep .row.last color-preset.last,:host ::ng-deep .row.last color-preset-sublist.last{border-radius:0 4px 4px 0}:host ::ng-deep .child-list .row.first color-preset.first,:host ::ng-deep .child-list .row.first color-preset-sublist.first{border-radius:4px 0 0}:host ::ng-deep .child-list .row.first color-preset.last,:host ::ng-deep .child-list .row.first color-preset-sublist.last{border-radius:0 4px 0 0}:host ::ng-deep .child-list .row.last color-preset.first,:host ::ng-deep .child-list .row.last color-preset-sublist.first{border-radius:0 0 0 4px}:host ::ng-deep .child-list .row.last color-preset.last,:host ::ng-deep .child-list .row.last color-preset-sublist.last{border-radius:0 0 4px}:host ::ng-deep .child-list{margin-top:6px;border-top:1px solid #e5e5e5;padding:6px 0 0}:host ::ng-deep .child-list color-preset:hover:after,:host ::ng-deep .child-list color-preset.selected:after{content:\"\\2714\";font-size:18px;color:#fff;border:0;left:0;top:0;bottom:0;right:0;line-height:30px;box-shadow:none;text-align:center}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.ChangeDetectorRef }]; }, propDecorators: { color: [{
                type: Input
            }], colorChange: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3dhdGNoZXMtcGlja2VyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2lwbGFiL25neC1jb2xvci1waWNrZXIvc3JjL2xpYi9jb21wb25lbnRzL3N3YXRjaGVzLXBpY2tlci9zd2F0Y2hlcy1waWNrZXIuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvaXBsYWIvbmd4LWNvbG9yLXBpY2tlci9zcmMvbGliL2NvbXBvbmVudHMvc3dhdGNoZXMtcGlja2VyL3N3YXRjaGVzLXBpY2tlci5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0gsU0FBUyxFQUVULEtBQUssRUFDTCxNQUFNLEVBQ04sWUFBWSxFQUVaLHVCQUF1QixFQUkxQixNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUNuRSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sa0NBQWtDLENBQUM7Ozs7QUFZbEUsTUFBTSxPQUFPLHVCQUF1QjtJQWtEaEMsWUFBNkIsR0FBc0I7UUFBdEIsUUFBRyxHQUFILEdBQUcsQ0FBbUI7UUE1QzVDLGdCQUFXLEdBQThCLElBQUksWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBRWpFLFlBQU8sR0FBdUIsSUFBSSxrQkFBa0IsRUFBRSxDQUFDO1FBQ3ZELGlCQUFZLEdBQXVCLElBQUksa0JBQWtCLEVBQUUsQ0FBQztRQUMzRCxrQkFBYSxHQUF3QixFQUFFLENBQUM7UUFFeEMsY0FBUyxHQUFHO1lBQ2hCLFNBQVMsRUFBRTtnQkFDUCxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTO2dCQUMzRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTO2dCQUMzRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTO2FBQzlFO1lBQ0QsU0FBUyxFQUFFO2dCQUNQLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVM7Z0JBQzNFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVM7Z0JBQzNFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVM7YUFDOUU7WUFDRCxTQUFTLEVBQUU7Z0JBQ1AsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUztnQkFDM0UsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUztnQkFDM0UsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUzthQUM5RTtZQUNELFNBQVMsRUFBRTtnQkFDUCxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTO2dCQUMzRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTO2dCQUMzRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTO2FBQzlFO1lBQ0QsU0FBUyxFQUFFO2dCQUNQLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVM7Z0JBQzNFLFNBQVMsRUFBRSxT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QUMsQ0FBQztRQUN6RSxJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7SUFDbEMsQ0FBQztJQUVNLFdBQVcsQ0FBQyxPQUFzQjtRQUNyQyxJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLE9BQU8sSUFBSSxjQUFjLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsS0FBSyxJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ3hHLElBQUksQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUM5QztJQUNMLENBQUM7O29IQXJHUSx1QkFBdUI7d0dBQXZCLHVCQUF1QixpSkMxQnBDLHdhQVdvRTsyRkRldkQsdUJBQXVCO2tCQVRuQyxTQUFTOytCQUNJLGlCQUFpQixtQkFNVix1QkFBdUIsQ0FBQyxNQUFNO3dHQUt4QyxLQUFLO3NCQURYLEtBQUs7Z0JBSUMsV0FBVztzQkFEakIsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgQ29tcG9uZW50LFxuICAgIE9uSW5pdCxcbiAgICBJbnB1dCxcbiAgICBPdXRwdXQsXG4gICAgRXZlbnRFbWl0dGVyLFxuICAgIFNpbXBsZUNoYW5nZXMsXG4gICAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gICAgT25EZXN0cm95LFxuICAgIENoYW5nZURldGVjdG9yUmVmLFxuICAgIE9uQ2hhbmdlc1xufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbG9yU3RyaW5nIH0gZnJvbSAnLi8uLi8uLi9oZWxwZXJzL2NvbG9yLmNsYXNzJztcbmltcG9ydCB7IENvbG9yUGlja2VyQ29udHJvbCB9IGZyb20gJy4vLi4vLi4vaGVscGVycy9jb250cm9sLmNsYXNzJztcbmltcG9ydCB7IGdldFZhbHVlQnlUeXBlIH0gZnJvbSAnLi8uLi8uLi9oZWxwZXJzL2hlbHBlci5mdW5jdGlvbnMnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiBgc3dhdGNoZXMtcGlja2VyYCxcbiAgICB0ZW1wbGF0ZVVybDogYC4vc3dhdGNoZXMtcGlja2VyLmNvbXBvbmVudC5odG1sYCxcbiAgICBzdHlsZVVybHM6IFtcbiAgICAgICAgYC4vLi4vcGFydHMvYmFzZS5zdHlsZS5zY3NzYCxcbiAgICAgICAgYC4vc3dhdGNoZXMtcGlja2VyLmNvbXBvbmVudC5zY3NzYFxuICAgIF0sXG4gICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbn0pXG5leHBvcnQgY2xhc3MgU3dhdGNoZXNQaWNrZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcywgT25EZXN0cm95IHtcblxuICAgIEBJbnB1dCgpXG4gICAgcHVibGljIGNvbG9yOiBzdHJpbmc7XG5cbiAgICBAT3V0cHV0KClcbiAgICBwdWJsaWMgY29sb3JDaGFuZ2U6IEV2ZW50RW1pdHRlcjxDb2xvclN0cmluZz4gPSBuZXcgRXZlbnRFbWl0dGVyKGZhbHNlKTtcblxuICAgIHB1YmxpYyBjb250cm9sOiBDb2xvclBpY2tlckNvbnRyb2wgPSBuZXcgQ29sb3JQaWNrZXJDb250cm9sKCk7XG4gICAgcHVibGljIGNoaWxkQ29udHJvbDogQ29sb3JQaWNrZXJDb250cm9sID0gbmV3IENvbG9yUGlja2VyQ29udHJvbCgpO1xuICAgIHByaXZhdGUgc3Vic2NyaXB0aW9uczogQXJyYXk8U3Vic2NyaXB0aW9uPiA9IFtdO1xuXG4gICAgcHJpdmF0ZSBtYXBDb2xvcnMgPSB7XG4gICAgICAgICcjRTYzMTVCJzogW1xuICAgICAgICAgICAgJyNmYzhkYTcnLCAnI2ZhN2Q5YScsICcjZjU2NDg0JywgJyNmMDRhNzEnLCAnI2U4MmM1OCcsICcjZTMxNzQ2JywgJyNkZTAyMzUnLFxuICAgICAgICAgICAgJyNkNjAyMzQnLCAnI2QxMDIzMicsICcjYzcwMjMwJywgJyNiODAyMmMnLCAnI2FiMDIyOScsICcjOWMwMjI1JywgJyM4ZjAxMjInLFxuICAgICAgICAgICAgJyM4YzAxMjInLCAnIzgyMDExZicsICcjNzgwMTFiJywgJyM2OTAxMTcnLCAnIzVjMDAxMicsICcjNGYwMDEwJywgJyM0MjAwMGMnXG4gICAgICAgIF0sXG4gICAgICAgICcjNzkzMTgzJzogW1xuICAgICAgICAgICAgJyNlZjhkZmMnLCAnI2ViN2RmYScsICcjZTY2NGY1JywgJyNkYzRhZjAnLCAnI2QyMmNlOCcsICcjY2IxN2UzJywgJyNjNDAyZGUnLFxuICAgICAgICAgICAgJyNjMDAyZDknLCAnI2JiMDJkNCcsICcjYjAwMmM3JywgJyNhMjAyYjgnLCAnIzk3MDJhYicsICcjOGEwMjljJywgJyM3ZTAxOGYnLFxuICAgICAgICAgICAgJyM3YTAxOGEnLCAnIzczMDE4MicsICcjNmMwMTc4JywgJyM1ZTAxNjknLCAnIzU0MDE1YycsICcjNDkwMTRmJywgJyMzZDAxNDInXG4gICAgICAgIF0sXG4gICAgICAgICcjMDA5REU3JzogW1xuICAgICAgICAgICAgJyM4ZGQ5ZmMnLCAnIzdkZDJmYScsICcjNjRjN2Y1JywgJyM0YWJiZjAnLCAnIzJjYWRlOCcsICcjMTdhMmUzJywgJyMwMjk4ZGUnLFxuICAgICAgICAgICAgJyMwMjk1ZDknLCAnIzAyOTFkNCcsICcjMDI4OWM3JywgJyMwMjdlYjgnLCAnIzAyNzVhYicsICcjMDI2YjljJywgJyMwMTYyOGYnLFxuICAgICAgICAgICAgJyMwMTVmOGEnLCAnIzAxNTk4MicsICcjMDE1Mjc4JywgJyMwMTQ4NjknLCAnIzAxM2Y1YycsICcjMDEzNjRmJywgJyMwMTJlNDInXG4gICAgICAgIF0sXG4gICAgICAgICcjMDBCNTlDJzogW1xuICAgICAgICAgICAgJyM4ZGZlZWEnLCAnIzdkZmJlNCcsICcjNjNmNGRiJywgJyM0YmVmZDInLCAnIzJkZTdjNicsICcjMTZlMmJlJywgJyMwM2RlYjcnLFxuICAgICAgICAgICAgJyMwMWRkYjYnLCAnIzAxZDRhZScsICcjMDFjN2E0JywgJyMwMWI4OTcnLCAnIzAxYWE4YicsICcjMDE5YjgwJywgJyMwMTkwNzYnLFxuICAgICAgICAgICAgJyMwMThjNzMnLCAnIzAxODM2YycsICcjMDE3NzYzJywgJyMwMTY4NTcnLCAnIzAwNWM0ZScsICcjMDA1MDQ0JywgJyMwMDQyMzknXG4gICAgICAgIF0sXG4gICAgICAgICcjRkZDRTAwJzogW1xuICAgICAgICAgICAgJyNmY2U2OGQnLCAnI2ZhZTE3ZCcsICcjZjVkYTY0JywgJyNmMGNmNGEnLCAnI2U4YzIyYycsICcjZTViYzE3JywgJyNkZWIyMDInLFxuICAgICAgICAgICAgJyNkZWIxMDAnLCAnI2Q0YWEwMicsICcjYzdhMDAyJywgJyNiODkzMDInLCAnI2FiODkwMicsICcjOWM3ZDAyJywgJyM4ZjczMDEnLFxuICAgICAgICAgICAgJyM4YzcwMDEnLCAnIzgyNjgwMScsICcjNzg2MjAxJywgJyM2OTU2MDEnLCAnIzVjNGIwMCcsICcjNGY0MTAwJywgJyM0MjM3MDAnXG4gICAgICAgIF0sXG4gICAgICAgICcjRkY0QTIxJzogW1xuICAgICAgICAgICAgJyNmY2EyOGQnLCAnI2ZhOTQ3ZCcsICcjZjU3ZjY0JywgJyNmMDY5NGEnLCAnI2U4NGYyYycsICcjZTMzYzE3JywgJyNkZTJhMDInLFxuICAgICAgICAgICAgJyNkOTJhMDInLCAnI2Q0MjkwMicsICcjYzcyNjAyJywgJyNiODIzMDInLCAnI2FiMjEwMicsICcjOWMxZTAyJywgJyM4ZjFiMDEnLFxuICAgICAgICAgICAgJyM4YTFhMDEnLCAnIzgyMTkwMScsICcjNzgxNzAxJywgJyM2OTEzMDAnLCAnIzVjMTEwMCcsICcjNGYwZTAwJywgJyM0MjBjMDAnXG4gICAgICAgIF0sXG4gICAgICAgICcjRDZENUQ2JzogW1xuICAgICAgICAgICAgJyNmZmYnLCAnI2YyZjJmMicsICcjZTVlNWU1JywgJyNkOWQ5ZDknLCAnI2NjY2NjYycsICcjYmZiZmJmJywgJyNiM2IzYjMnLFxuICAgICAgICAgICAgJyNhNmE2YTYnLCAnIzk5OTk5OScsICcjOGM4YzhjJywgJyM4MDgwODAnLCAnIzczNzM3MycsICcjNjY2NjY2JywgJyM1OTU5NTknLFxuICAgICAgICAgICAgJyM0ZDRkNGQnLCAnIzQyNDI0MicsICcjMzYzNjM2JywgJyMyNjI2MjYnLCAnIzFhMWExYScsICcjMGYwZjBmJywgJyMwMDAnXG4gICAgICAgIF1cbiAgICB9O1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBjZHI6IENoYW5nZURldGVjdG9yUmVmKSB7XG4gICAgfVxuXG4gICAgcHVibGljIG5nT25Jbml0KCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5jb2xvcikge1xuICAgICAgICAgICAgdGhpcy5jaGlsZENvbnRyb2wuc2V0VmFsdWVGcm9tKHRoaXMuY29sb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb250cm9sLnNldFZhbHVlRnJvbSgnI0U2MzE1QicpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHNldCBjb2xvciBwcmVzZXRzXG4gICAgICAgICAqIGRlZmluZWQgYnkgc3dhdGNoZXMgY29sb3IgcGlja2VyIGNvbXBvbmVudFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb250cm9sLnNldENvbG9yUHJlc2V0cyhbXG4gICAgICAgICAgICAnI2U2MzE1YicsICcjNzkzMTgzJywgJyMwMDlkZTcnLCAnIzAwYjU5YycsICcjZmZjZTAwJywgJyNmZjRhMjEnLCAnI2Q2ZDVkNidcbiAgICAgICAgXSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGluaXRpYWxseSBvcGVuIGZpcnN0IGdyb3VwXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNoaWxkQ29udHJvbC5zZXRDb2xvclByZXNldHModGhpcy5tYXBDb2xvcnNbJyNFNjMxNUInXSk7XG5cbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goXG4gICAgICAgICAgICB0aGlzLmNoaWxkQ29udHJvbC52YWx1ZUNoYW5nZXMuc3Vic2NyaWJlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY29sb3JDaGFuZ2UuZW1pdChnZXRWYWx1ZUJ5VHlwZSh2YWx1ZSwgdGhpcy5jaGlsZENvbnRyb2wuaW5pdFR5cGUpKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goXG4gICAgICAgICAgICB0aGlzLmNvbnRyb2wudmFsdWVDaGFuZ2VzLnN1YnNjcmliZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmVzZXRzID0gdGhpcy5tYXBDb2xvcnNbdmFsdWUudG9IZXhTdHJpbmcoKV07XG4gICAgICAgICAgICAgICAgaWYgKHByZXNldHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGlsZENvbnRyb2wuc2V0Q29sb3JQcmVzZXRzKHByZXNldHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNvbG9yQ2hhbmdlLmVtaXQoZ2V0VmFsdWVCeVR5cGUodGhpcy5jaGlsZENvbnRyb2wudmFsdWUsIHRoaXMuY2hpbGRDb250cm9sLmluaXRUeXBlKSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jZHIuZGV0YWNoKCk7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5mb3JFYWNoKChzdWJzY3JpcHRpb24pID0+IHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmxlbmd0aCA9IDA7XG4gICAgfVxuXG4gICAgcHVibGljIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuY29sb3IgJiYgdGhpcy5jb250cm9sICYmIGdldFZhbHVlQnlUeXBlKHRoaXMuY29udHJvbC52YWx1ZSwgdGhpcy5jb250cm9sLmluaXRUeXBlKSAhPT0gdGhpcy5jb2xvcikge1xuICAgICAgICAgICAgdGhpcy5jaGlsZENvbnRyb2wuc2V0VmFsdWVGcm9tKHRoaXMuY29sb3IpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiPGNvbG9yLXByZXNldHMtY29tcG9uZW50IFxuICAgIFtjb2x1bW5zXT1cIjdcIlxuICAgIGRpcmVjdGlvbj1cImRvd25cIlxuICAgIFsoY29sb3IpXT1cImNvbnRyb2wudmFsdWVcIiBcbiAgICBbY29sb3JQcmVzZXRzXT1cImNvbnRyb2wucHJlc2V0c1wiPjwvY29sb3ItcHJlc2V0cy1jb21wb25lbnQ+XG48Y29sb3ItcHJlc2V0cy1jb21wb25lbnRcbiAgICBjbGFzcz1cImNoaWxkLWxpc3RcIlxuICAgICpuZ0lmPVwiY2hpbGRDb250cm9sLnByZXNldHMubGVuZ3RoXCJcbiAgICBbY29sdW1uc109XCI3XCJcbiAgICBkaXJlY3Rpb249XCJkb3duXCJcbiAgICBbKGNvbG9yKV09XCJjaGlsZENvbnRyb2wudmFsdWVcIiBcbiAgICBbY29sb3JQcmVzZXRzXT1cImNoaWxkQ29udHJvbC5wcmVzZXRzXCI+PC9jb2xvci1wcmVzZXRzLWNvbXBvbmVudD4iXX0=